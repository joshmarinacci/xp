@board("canvas")

let palette = List(BLACK, RED, GREEN, BLUE)
let dots
let origin = List(0,0)

//the colors and screen are already imported

//call this once at app start
@type("start",setup)
fun setup() {
    fun MakeDot() {
        let dot = Obj()
        dot.xy = Point(randi(0,screen.width), randi(0,1))
        dot.v =  Vector(randf(-0.1,0.1), randf(0.5,1.5))
        dot.color = choose(palette)
        return dot
    }
    dots = range(20).map(()=> { MakeDot()})
}

// call this every one second
@type("loop",loop,1)
fun loop() {
    dots.every((dot) => {
        dot.xy = wrap(dot.xy + dot.v, origin, screen.size)
        screen.setPixel(dot.xy,dot.color)
    })
}

