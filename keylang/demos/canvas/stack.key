@board('canvas')

let rects
let WIDTH = 800
screen = new KCanvas(0,0,WIDTH,800)

@type("start",setup)
fun setup() {
    rects = range(screen.top,screen.bottom,20).map((i)=> {
        let r = Rect(y:i, w:randf(WIDTH*0.4,WIDTH*0.9), h:20)
        let v = screen.width - r.w
        r.x = v/2
        r.hue = randf(0,0.2)
        r
    })
}

@type("loop",loop)
fun loop() {
    rects.every((rect) => {
        rect.hue = wrap(rect.hue + 0.001,0,1)
        rect.color = KeyColor(hue:rect.hue, sat:0.6, lit:0.5)
        screen.fillRect(rect,rect.color)
    })
}
