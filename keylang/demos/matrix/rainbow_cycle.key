@board("matrix")

//range & arange min,max,step
//create a palette of 100 colors through the rainbow
let palette = range(100).map((v) => { HSL(remap(v,0,100, 0,1),0.5,0.5) })

let rects

@type('start',setup)
fun setup() {
    rects = range(3).map((r) => { Rect(0,0,64,32) })
}

@type("loop",loop,1)
fun loop() {
    let t = sine1(system.time)
    let n = floor(remap(t,0,1, 0,palette.length))
    rects.every((r) => { screen.fillRect(r,palette.get(n)) })
}
