screen = Rect(w:64, h:32)
palette = List()
black = Color(0,0,0)
red = Color(1,0,0)
green = Color(0,1,0)
blue = Color(0,0,1)

@on(system.setup)
fun setup_drips() {
    palette = List(black,red,green,blue)
    fun MakeDot() {
        dot = Obj()
        dot.xy = Point(randi(0,screen.width), randi(0,1))
        dot.v =  Vector(randf(-0.1,0.1), randf(0.5,1.5))
        dot.color = choose(palette)
    }
    dots = range(20) => map(()=> MakeDot())

    bitmap = Bitmap(screen.size)
    bitmap.fill(0)
}

@on(system.forever)
fun draw_dots() {
    every dot in dots do {
        dot.xy = wrap(dot.xy + dot.v, [0,0], screen.size)
        bitmap.setPixel(dot,dot.color)
        bitmap setPixel dot dot.color
    }
    wait(1)
}
